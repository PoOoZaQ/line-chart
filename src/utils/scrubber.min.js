(function(){({showScrubber:function(n,t,i,r,u,f,e){var o=this;t.on("mousemove",function(){return n.selectAll(".glass-container").attr("opacity",1),o.updateScrubber(n,d3.mouse(this),i,r,u,f,e)});return t.on("mouseout",function(){t.on("mousemove",null);return n.selectAll(".glass-container").attr("opacity",0)})},getClosestPoint:function(n,t){var r,u,i,f;return(f=d3.bisector(function(n){return n.x}).left,i=f(n,t),i===0)?n[0]:i>n.length-1?n[n.length-1]:(r=n[i-1],u=n[i],t-r.x>u.x-t?u:r)},updateScrubber:function(n,t,i,r,u,f,e){var h,o,s,c,l,a;return l=t[0],a=t[1],h=function(n){return n.transition().duration(50)},s=this,o=[],r.forEach(function(t,r){var d,c,y,p,g,w,v,nt,b,e,tt,k,it;if(c=n.select(".scrubberItem.series_"+r),u.series[r].visible===!1){c.attr("opacity",0);return}return c.attr("opacity",1),tt=i.xScale.invert(l),it=i.yScale.invert(a),e=s.getClosestPoint(t.values,tt),f.focus(e,t.values.indexOf(e),[tt,it]),b=e.x+" : "+e.y,u.tooltip.formatter&&(b=u.tooltip.formatter(e.x,e.y,u.series[r],e.raw)),w=c.select(".rightTT"),g=w.select("text"),g.text(b),p=c.select(".leftTT"),y=p.select("text"),y.text(b),nt={right:s.getTextBBox(g[0][0]).width+5,left:s.getTextBBox(y[0][0]).width+5},v=t.axis==="y2"?"right":"left",k=i.xScale(e.x),v==="left"?k+s.getTextBBox(y[0][0]).x-10<0&&(v="right"):v==="right"&&k+nt.right>s.getTextBBox(n.select(".glass")[0][0]).width&&(v="left"),v==="left"?(h(w).attr("opacity",0),h(p).attr("opacity",1)):(h(w).attr("opacity",1),h(p).attr("opacity",0)),o[r]={index:r,x:k,y:i[e.axis+"Scale"](e.y+e.y0),side:v,sizes:nt},d=angular.isFunction(t.color)?t.color(e,t.values.indexOf(e)):t.color,c.selectAll("circle").attr("stroke",d),c.selectAll("path").attr("fill",d)}),o=this.preventOverlapping(o),c=Math.max(15,100/e),r.forEach(function(t,i){var e,r,l,f;if(u.series[i].visible!==!1)return r=o[i],e=n.select(".scrubberItem.series_"+i),l=e.select("."+r.side+"TT"),f=r.side==="left"?t.xOffset:-t.xOffset,l.select("text").attr("transform",function(){return r.side==="left"?"translate("+(-3-c-f)+", "+(r.labelOffset+3)+")":"translate("+(4+c+f)+", "+(r.labelOffset+3)+")"}),l.select("path").attr("d",s.getScrubberPath(r.sizes[r.side]+1,r.labelOffset,r.side,c+f)),h(e).attr({transform:"translate("+(o[i].x+t.xOffset)+", "+o[i].y+")"})})},getScrubberPath:function(n,t,i,r){var e,o,u,f;return e=18,o=r,n=n,u=i==="left"?1:-1,f=1,t!==0&&(f=Math.abs(t)/t),t||(t=0),["m0 0","l"+u+" 0","l0 "+(t+f),"l"+-u*(o+1)+" 0","l0 "+(-e/2-f),"l"+-u*n+" 0","l0 "+e,"l"+u*n+" 0","l0 "+(-e/2-f),"l"+u*(o-1)+" 0","l0 "+(-t+f),"l1 0","z"].join("")},preventOverlapping:function(n){var t,i,r,u;return r=18,t={},n.forEach(function(n){var i;return t[i=n.x]||(t[i]={left:[],right:[]}),t[n.x][n.side].push(n)}),i=function(n){var o,c,s,i,u,e,h,f,l;s=[];for(h in t)if((e=t[h],t.hasOwnProperty(h))&&e[n].length!==0){for(i={};e[n].length>0;){u=e[n].pop();o=!1;for(f in i)(c=i[f],i.hasOwnProperty(f))&&+f-r<=(l=u.y)&&l<=+f+r&&(c.push(u),o=!0);o||(i[u.y]=[u])}s.push(i)}return s},u=function(n){var f,i,t,o,r,u,e;r=20;for(f in n)if(u=n[f],n.hasOwnProperty(f))for(e in u)if(t=u[e],u.hasOwnProperty(e)){if(i=t.length,i===1){t[0].labelOffset=0;continue}t=t.sort(function(n,t){return n.y-t.y});o=i%2==0?-(r/2)*(i/2):-(i-1)/2*r;t.forEach(function(n,t){return n.labelOffset=o+r*t})}},u(i("left")),u(i("right")),n}})}).call(this);
//# sourceMappingURL=scrubber.min.js.map
